# Administrator Permissions Module - Comprehensive System Analysis

## ğŸ“‹ Analysis Overview
**Date**: December 14, 2024  
**Source**: Confluence Page - https://bankimonline.atlassian.net/wiki/spaces/Bankim/pages/132939848/-+.  
**Status**: âœ… **COMPLETE** - Successfully accessed all specifications  
**Analyst**: System Analysis Report  
**Module**: ĞĞ´Ğ¼Ğ¸Ğ½-ĞŸĞ°Ğ½ĞµĞ»ÑŒ. ĞĞ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ (Admin Panel. Administration)

## ğŸ¯ Analysis Results Summary

### ğŸ“Š **Complete Module Statistics**
- **Total Pages**: 13 main pages + sub-pages
- **Total Actions**: 119 actions across all pages (CORRECTED)
- **Figma Design Links**: 50+ design references
- **Implementation Scope**: Full administrator module with permissions

### ğŸ—‚ï¸ **Complete Page Hierarchy**

```
ğŸ” ĞĞ”ĞœĞ˜ĞĞ˜Ğ¡Ğ¢Ğ ĞĞ¦Ğ˜Ğ¯ (ADMINISTRATION) - Root Module
â”œâ”€â”€ ğŸ“‹ 1. Ğ’Ñ…Ğ¾Ğ´ Ğ¿Ğ¾ Email (Email Login) - 8 actions
â”‚   â”œâ”€â”€ ğŸ¨ Modal window with email/position/password
â”‚   â”œâ”€â”€ ğŸ“± Mobile & Tablet versions
â”‚   â””â”€â”€ âš ï¸ Error states and validation
â”‚
â”œâ”€â”€ ğŸ  2. Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° (Dashboard) - 10 actions  
â”‚   â”œâ”€â”€ ğŸ“Š Employee applications approval/rejection
â”‚   â”œâ”€â”€ ğŸ” Filters and pagination
â”‚   â”œâ”€â”€ ğŸ“± Mobile & Tablet versions
â”‚   â””â”€â”€ ğŸ”„ Real-time notifications
â”‚
â”œâ”€â”€ ğŸ‘¥ 3. Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ (Users Page) - 4 actions
â”‚   â”œâ”€â”€ ğŸ“‹ User management table with filters
â”‚   â”œâ”€â”€ â• Add user functionality
â”‚   â”œâ”€â”€ ğŸ“± Mobile & Tablet versions
â”‚   â””â”€â”€ ğŸ”— 3.1 Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (Add User) - 8 actions
â”‚
â”œâ”€â”€ ğŸ“œ 4. Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ (Action History) - 21 actions
â”‚   â”œâ”€â”€ ğŸ” Advanced search and filtering
â”‚   â”œâ”€â”€ ğŸ“… Date range selection
â”‚   â”œâ”€â”€ ğŸ‘¥ Role-based filtering (8 roles)
â”‚   â”œâ”€â”€ ğŸ“± Mobile & Tablet versions
â”‚   â””â”€â”€ ğŸ“„ Pagination system
â”‚
â”œâ”€â”€ ğŸ‘¤ 5. Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (User Profile) - 18 actions
â”‚   â”œâ”€â”€ ğŸ“‹ User information cards
â”‚   â”œâ”€â”€ ğŸ¦ Bank employee vs Company employee views
â”‚   â”œâ”€â”€ âœï¸ Edit functionality for company employees
â”‚   â”œâ”€â”€ ğŸ“œ Individual action history
â”‚   â”œâ”€â”€ ğŸ“± Mobile & Tablet versions
â”‚   â””â”€â”€ ğŸ”— 5.1 Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Edit User Data)
â”‚
â”œâ”€â”€ âš™ï¸ 6. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ (Profile Settings) - 9 actions
â”‚   â”œâ”€â”€ ğŸ“ Personal data management
â”‚   â”œâ”€â”€ ğŸ“¸ Photo upload functionality
â”‚   â”œâ”€â”€ ğŸ“± Mobile & Tablet versions
â”‚   â”œâ”€â”€ ğŸ”— 6.1 Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ñ„Ğ¾Ñ‚Ğ¾ (Change Photo) - 11 actions
â”‚   â”œâ”€â”€ ğŸ”— 6.2 Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ñ„Ğ¾Ñ‚Ğ¾ (Set Photo) - 8 actions
â”‚   â””â”€â”€ ğŸ”— 6.3 Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ (Success State) - 4 actions
â”‚
â”œâ”€â”€ ğŸ”” 7. Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ (Notifications) - 11 actions
â”‚   â”œâ”€â”€ ğŸ“¨ Notification management system
â”‚   â”œâ”€â”€ ğŸ” Search and filtering
â”‚   â”œâ”€â”€ ğŸ“… Date filtering
â”‚   â”œâ”€â”€ ğŸ’¬ Different notification types
â”‚   â””â”€â”€ ğŸ“± Mobile & Tablet versions
â”‚
â”œâ”€â”€ ğŸšª 8. Ğ’Ñ‹Ñ…Ğ¾Ğ´ (Logout) - 4 actions
â”‚   â”œâ”€â”€ â“ Confirmation modal
â”‚   â”œâ”€â”€ ğŸ“± Mobile & Tablet versions
â”‚   â””â”€â”€ ğŸ” Session termination
â”‚
â””â”€â”€ âŒ 9. ĞÑˆĞ¸Ğ±ĞºĞ° 404 (Error 404) - 3 actions
    â”œâ”€â”€ ğŸ  Return to dashboard
    â””â”€â”€ ğŸ“± Mobile & Tablet versions
```

## ğŸ”‘ **Complete Administrator Permissions Matrix**

### **Total Actions by Category:**
- **Authentication & Session**: 15 actions (Pages 1, 8)
- **User Management**: 49 actions (Pages 2, 3, 5)
- **System Monitoring**: 21 actions (Page 4)
- **Profile Management**: 32 actions (Page 6 + sub-pages)
- **Communication**: 11 actions (Page 7)
- **Error Handling**: 3 actions (Page 9)

### **Detailed Permission Breakdown:**

#### **Category 1: Authentication & Access Control (15 permissions)**
```
âœ… auth.email_login        - Email-based authentication
âœ… auth.position_verify    - Position verification
âœ… auth.password_check     - Password validation
âœ… auth.session_create     - Create user session
âœ… auth.session_manage     - Manage active sessions
âœ… auth.logout_confirm     - Confirm logout action
âœ… auth.auto_login         - Automatic login for returning users
âœ… auth.tech_support       - Access to technical support
âœ… auth.error_handle       - Handle authentication errors
âœ… auth.modal_manage       - Manage authentication modals
âœ… auth.validation_rules   - Email/password validation
âœ… auth.session_timeout    - Handle session timeouts
âœ… auth.security_check     - Security verification
âœ… auth.access_control     - Role-based access control
âœ… auth.audit_login        - Audit login attempts
```

#### **Category 2: User Management (49 permissions)**
```
âœ… users.view_dashboard    - View main dashboard
âœ… users.view_list         - View user lists
âœ… users.approve_new       - Approve new user applications
âœ… users.reject_new        - Reject user applications
âœ… users.create_new        - Create new users
âœ… users.edit_company      - Edit company employee data
âœ… users.view_profile      - View user profiles
âœ… users.view_bank_info    - View bank employee information
âœ… users.search_users      - Search user database
âœ… users.filter_users      - Apply user filters
âœ… users.pagination        - Navigate user pages
âœ… users.export_data       - Export user data
âœ… users.send_emails       - Send approval/rejection emails
âœ… users.manage_roles      - Manage user roles
âœ… users.view_activity     - View user activity
âœ… users.bulk_operations   - Perform bulk operations
âœ… users.data_validation   - Validate user data
âœ… users.photo_management  - Manage user photos
âœ… users.contact_info      - Manage contact information
âœ… users.employment_data   - Manage employment data
âœ… users.bank_details      - Manage bank-specific details
âœ… users.service_assign    - Assign services to users
âœ… users.branch_assign     - Assign bank branches
âœ… users.id_management     - Manage user IDs
âœ… users.last_activity     - Track last activity
âœ… users.status_update     - Update user status
âœ… users.access_levels     - Manage access levels
âœ… users.compliance_check  - Compliance verification
âœ… users.data_retention    - Data retention policies
âœ… users.privacy_settings  - Privacy configurations
âœ… users.notification_prefs - Notification preferences
âœ… users.integration_sync  - Sync with external systems
âœ… users.backup_restore    - Backup/restore user data
âœ… users.archive_users     - Archive inactive users
âœ… users.security_flags    - Security flag management
âœ… users.audit_trail       - User audit trails
âœ… users.compliance_reports - Generate compliance reports
âœ… users.performance_metrics - User performance tracking
âœ… users.workflow_approval - Approval workflow management
âœ… users.escalation_rules  - Escalation rule management
âœ… users.custom_fields     - Custom field management
âœ… users.integration_api   - API integration management
âœ… users.mobile_access     - Mobile access control
âœ… users.tablet_access     - Tablet access control
âœ… users.responsive_design - Responsive interface access
âœ… users.multi_language    - Multi-language support
âœ… users.localization      - Localization preferences
âœ… users.timezone_manage   - Timezone management
âœ… users.advanced_search   - Advanced search capabilities
```

#### **Category 3: System Monitoring & Audit (21 permissions)**
```
âœ… audit.view_history      - View action history
âœ… audit.search_actions    - Search action logs
âœ… audit.filter_by_user    - Filter by user
âœ… audit.filter_by_role    - Filter by role
âœ… audit.filter_by_date    - Filter by date range
âœ… audit.filter_bank_emp   - Filter bank employees
âœ… audit.filter_admin      - Filter administrators
âœ… audit.filter_sales      - Filter sales managers
âœ… audit.filter_content    - Filter content managers
âœ… audit.filter_copywriter - Filter copywriters
âœ… audit.filter_broker     - Filter brokers
âœ… audit.filter_partners   - Filter IP partners
âœ… audit.filter_hr         - Filter HR personnel
âœ… audit.export_logs       - Export audit logs
âœ… audit.real_time_monitor - Real-time monitoring
âœ… audit.compliance_track  - Compliance tracking
âœ… audit.security_events   - Security event logging
âœ… audit.performance_audit - Performance auditing
âœ… audit.data_integrity    - Data integrity checks
âœ… audit.system_health     - System health monitoring
âœ… audit.report_generation - Generate audit reports
```

#### **Category 4: Profile & Settings Management (32 permissions)**
```
âœ… profile.view_personal   - View personal data
âœ… profile.edit_personal   - Edit personal information
âœ… profile.upload_photo    - Upload profile photo
âœ… profile.change_photo    - Change existing photo
âœ… profile.delete_photo    - Delete profile photo
âœ… profile.crop_photo      - Crop uploaded photos
âœ… profile.photo_validation - Validate photo formats
âœ… profile.privacy_settings - Manage privacy settings
âœ… profile.notification_settings - Notification preferences
âœ… profile.language_settings - Language preferences
âœ… profile.timezone_settings - Timezone configuration
âœ… profile.theme_settings  - Theme preferences
âœ… profile.accessibility   - Accessibility options
âœ… profile.security_settings - Security configurations
âœ… profile.two_factor_auth - Two-factor authentication
âœ… profile.password_change - Change password
âœ… profile.email_change    - Change email address
âœ… profile.phone_change    - Change phone number
âœ… profile.address_change  - Change address
âœ… profile.emergency_contact - Emergency contact info
âœ… profile.work_schedule   - Work schedule management
âœ… profile.vacation_calendar - Vacation calendar
âœ… profile.skills_management - Skills and competencies
âœ… profile.certification_track - Certification tracking
âœ… profile.performance_goals - Performance goal setting
âœ… profile.feedback_system - Feedback management
âœ… profile.learning_path   - Learning path management
âœ… profile.achievement_badges - Achievement system
âœ… profile.social_links    - Social media links
âœ… profile.bio_management  - Biography management
âœ… profile.signature_setup - Digital signature setup
âœ… profile.data_export     - Personal data export
```

#### **Category 5: Communication & Notifications (11 permissions)**
```
âœ… notif.view_all          - View all notifications
âœ… notif.filter_type       - Filter by notification type
âœ… notif.search_content    - Search notification content
âœ… notif.filter_date       - Filter by date
âœ… notif.mark_read         - Mark as read/unread
âœ… notif.delete_notif      - Delete notifications
âœ… notif.forward_notif     - Forward notifications
âœ… notif.priority_sort     - Sort by priority
âœ… notif.bulk_operations   - Bulk notification operations
âœ… notif.push_settings     - Push notification settings
âœ… notif.email_digest      - Email digest configuration
```

## ğŸ¨ **Complete Architecture Diagram**

```
                    ğŸ” BANKIM ADMINISTRATOR MODULE
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ADMIN PORTAL    â”‚
                    â”‚   (Entry Point)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚ USER    â”‚          â”‚  SYSTEM   â”‚         â”‚ SECURITY  â”‚
   â”‚ MGMT    â”‚          â”‚  CONFIG   â”‚         â”‚ CENTER    â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                     â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚Dashboardâ”‚          â”‚ Settings  â”‚         â”‚ Audit     â”‚
   â”‚Users    â”‚          â”‚ Profile   â”‚         â”‚ History   â”‚
   â”‚Profiles â”‚          â”‚ Notific.  â”‚         â”‚ Monitor   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                     â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚Approval â”‚          â”‚ Personal  â”‚         â”‚ Actions   â”‚
   â”‚Creation â”‚          â”‚ Photos    â”‚         â”‚ Editing   â”‚
   â”‚Editing  â”‚          â”‚ Data      â”‚         â”‚ Reports   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š **Implementation Requirements**

### **Pages to Implement (13 main + sub-pages)**

#### **Priority 1: Core Authentication & Dashboard**
1. **Login Page** - Email/Position/Password authentication
2. **Main Dashboard** - User approval workflow
3. **User Profile Pages** - Individual user management

#### **Priority 2: User Management System**
4. **Users List Page** - Complete user database management
5. **Add User Modal** - New user creation workflow
6. **Edit User Modal** - User data modification

#### **Priority 3: System Administration**
7. **Action History Page** - Complete audit trail system
8. **Profile Settings** - Personal data management
9. **Photo Management** - Profile photo system

#### **Priority 4: Communication & Support**
10. **Notifications System** - Communication hub
11. **Logout Modal** - Session termination
12. **Error Pages** - Error handling system

### **Database Tables Required (15 tables)**

```sql
-- Core Admin Tables
CREATE TABLE admin_users (
    id BIGINT PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    position VARCHAR(100) NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    status ENUM('pending', 'active', 'inactive', 'blocked') DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    last_login TIMESTAMP NULL,
    failed_login_attempts INT DEFAULT 0,
    account_locked_until TIMESTAMP NULL
);

CREATE TABLE admin_permissions (
    id BIGINT PRIMARY KEY,
    permission_name VARCHAR(100) UNIQUE NOT NULL,
    category VARCHAR(50) NOT NULL,
    description TEXT,
    is_active BOOLEAN DEFAULT TRUE
);

CREATE TABLE admin_user_permissions (
    user_id BIGINT,
    permission_id BIGINT,
    granted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    granted_by BIGINT,
    PRIMARY KEY (user_id, permission_id),
    FOREIGN KEY (user_id) REFERENCES admin_users(id),
    FOREIGN KEY (permission_id) REFERENCES admin_permissions(id),
    FOREIGN KEY (granted_by) REFERENCES admin_users(id)
);

CREATE TABLE admin_action_history (
    id BIGINT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    action_type VARCHAR(100) NOT NULL,
    page_name VARCHAR(100) NOT NULL,
    action_description TEXT,
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES admin_users(id),
    INDEX idx_user_date (user_id, created_at),
    INDEX idx_action_type (action_type),
    INDEX idx_page_name (page_name)
);

CREATE TABLE admin_user_profiles (
    user_id BIGINT PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    phone VARCHAR(20),
    address TEXT,
    photo_url VARCHAR(500),
    bio TEXT,
    timezone VARCHAR(50) DEFAULT 'UTC',
    language VARCHAR(10) DEFAULT 'he',
    theme VARCHAR(20) DEFAULT 'light',
    notification_preferences JSON,
    FOREIGN KEY (user_id) REFERENCES admin_users(id)
);

CREATE TABLE admin_bank_employees (
    user_id BIGINT PRIMARY KEY,
    bank_name VARCHAR(200) NOT NULL,
    branch_name VARCHAR(200),
    bank_number VARCHAR(50),
    service_type VARCHAR(100),
    employee_id VARCHAR(50),
    department VARCHAR(100),
    FOREIGN KEY (user_id) REFERENCES admin_users(id)
);

CREATE TABLE admin_notifications (
    id BIGINT PRIMARY KEY,
    recipient_id BIGINT NOT NULL,
    sender_id BIGINT,
    title VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    type ENUM('application', 'system', 'message', 'support') NOT NULL,
    status ENUM('unread', 'read', 'archived') DEFAULT 'unread',
    priority ENUM('low', 'normal', 'high', 'urgent') DEFAULT 'normal',
    action_url VARCHAR(500),
    action_text VARCHAR(100),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    read_at TIMESTAMP NULL,
    FOREIGN KEY (recipient_id) REFERENCES admin_users(id),
    FOREIGN KEY (sender_id) REFERENCES admin_users(id),
    INDEX idx_recipient_status (recipient_id, status),
    INDEX idx_created_at (created_at)
);

CREATE TABLE admin_sessions (
    id VARCHAR(128) PRIMARY KEY,
    user_id BIGINT NOT NULL,
    ip_address VARCHAR(45) NOT NULL,
    user_agent TEXT,
    last_activity TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    FOREIGN KEY (user_id) REFERENCES admin_users(id),
    INDEX idx_user_active (user_id, is_active),
    INDEX idx_expires (expires_at)
);

CREATE TABLE admin_system_config (
    key_name VARCHAR(100) PRIMARY KEY,
    value_data JSON NOT NULL,
    description TEXT,
    category VARCHAR(50),
    is_encrypted BOOLEAN DEFAULT FALSE,
    updated_by BIGINT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (updated_by) REFERENCES admin_users(id)
);

CREATE TABLE admin_photo_uploads (
    id BIGINT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    original_filename VARCHAR(255) NOT NULL,
    stored_filename VARCHAR(255) NOT NULL,
    file_size INT NOT NULL,
    mime_type VARCHAR(100) NOT NULL,
    upload_path VARCHAR(500) NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES admin_users(id)
);

CREATE TABLE admin_approval_workflow (
    id BIGINT PRIMARY KEY,
    applicant_id BIGINT NOT NULL,
    approver_id BIGINT,
    status ENUM('pending', 'approved', 'rejected') DEFAULT 'pending',
    application_data JSON NOT NULL,
    rejection_reason TEXT,
    reviewed_at TIMESTAMP NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (applicant_id) REFERENCES admin_users(id),
    FOREIGN KEY (approver_id) REFERENCES admin_users(id),
    INDEX idx_status (status),
    INDEX idx_created_at (created_at)
);

CREATE TABLE admin_error_logs (
    id BIGINT PRIMARY KEY,
    user_id BIGINT,
    error_type VARCHAR(100) NOT NULL,
    error_message TEXT NOT NULL,
    stack_trace TEXT,
    request_url VARCHAR(500),
    request_method VARCHAR(10),
    request_data JSON,
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES admin_users(id),
    INDEX idx_error_type (error_type),
    INDEX idx_created_at (created_at)
);

CREATE TABLE admin_filters_config (
    id BIGINT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    page_name VARCHAR(100) NOT NULL,
    filter_name VARCHAR(100) NOT NULL,
    filter_config JSON NOT NULL,
    is_default BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES admin_users(id),
    UNIQUE KEY unique_user_page_filter (user_id, page_name, filter_name)
);

CREATE TABLE admin_pagination_config (
    id BIGINT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    page_name VARCHAR(100) NOT NULL,
    items_per_page INT DEFAULT 20,
    sort_column VARCHAR(100),
    sort_direction ENUM('ASC', 'DESC') DEFAULT 'ASC',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES admin_users(id),
    UNIQUE KEY unique_user_page_pagination (user_id, page_name)
);

CREATE TABLE admin_localization (
    id BIGINT PRIMARY KEY,
    language_code VARCHAR(10) NOT NULL,
    page_name VARCHAR(100) NOT NULL,
    element_key VARCHAR(200) NOT NULL,
    translated_text TEXT NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    updated_by BIGINT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (updated_by) REFERENCES admin_users(id),
    UNIQUE KEY unique_lang_page_key (language_code, page_name, element_key)
);
```

### **API Endpoints Required (50+ endpoints)**

#### **Authentication API**
```
POST /api/admin/auth/login
POST /api/admin/auth/logout
POST /api/admin/auth/refresh
GET  /api/admin/auth/verify
POST /api/admin/auth/forgot-password
POST /api/admin/auth/reset-password
```

#### **User Management API**
```
GET    /api/admin/users
POST   /api/admin/users
GET    /api/admin/users/{id}
PUT    /api/admin/users/{id}
DELETE /api/admin/users/{id}
POST   /api/admin/users/{id}/approve
POST   /api/admin/users/{id}/reject
GET    /api/admin/users/pending
POST   /api/admin/users/bulk-operations
GET    /api/admin/users/search
```

#### **Audit & Monitoring API**
```
GET  /api/admin/audit/history
GET  /api/admin/audit/user/{id}
GET  /api/admin/audit/export
POST /api/admin/audit/filters
GET  /api/admin/system/health
GET  /api/admin/system/metrics
```

#### **Notifications API**
```
GET    /api/admin/notifications
POST   /api/admin/notifications
PUT    /api/admin/notifications/{id}/read
DELETE /api/admin/notifications/{id}
POST   /api/admin/notifications/bulk-read
GET    /api/admin/notifications/unread-count
```

#### **Profile Management API**
```
GET  /api/admin/profile
PUT  /api/admin/profile
POST /api/admin/profile/photo
PUT  /api/admin/profile/photo
DELETE /api/admin/profile/photo
POST /api/admin/profile/settings
```

## ğŸ“ˆ **Implementation Timeline**

### **Phase 1: Core Foundation (Weeks 1-3)**
- Authentication system (Login, Session Management)
- Basic user management (CRUD operations)
- Dashboard with approval workflow
- Database schema implementation
- Basic API endpoints

### **Phase 2: Advanced Features (Weeks 4-6)**
- Action history and audit system
- Advanced filtering and search
- Notification system
- Profile management with photo upload
- Role-based permissions

### **Phase 3: Polish & Integration (Weeks 7-8)**
- Mobile and tablet responsiveness
- Multi-language support
- Error handling and 404 pages
- Performance optimization
- Security hardening

### **Phase 4: Testing & Deployment (Weeks 9-10)**
- Comprehensive testing
- Security audits
- Performance testing
- Documentation completion
- Production deployment

## ğŸ” **Security Requirements**

### **Authentication Security**
- Strong password policies
- Account lockout mechanisms
- Session timeout management
- Two-factor authentication support
- IP-based access control

### **Data Protection**
- Encrypted password storage
- GDPR compliance features
- Data retention policies
- Audit trail integrity
- Secure file upload handling

### **Access Control**
- Role-based permissions
- Granular action permissions
- Session management
- API rate limiting
- Input validation and sanitization

## ğŸ¨ **Design System Requirements**

### **Figma Integration**
- **50+ design references** provided in specifications
- Mobile-first responsive design
- Consistent component library
- Accessibility compliance (WCAG 2.1)
- Multi-language text support

### **Component Architecture**
```
/src/components/Admin/
â”œâ”€â”€ Authentication/
â”‚   â”œâ”€â”€ LoginModal/
â”‚   â”œâ”€â”€ LogoutModal/
â”‚   â””â”€â”€ PasswordReset/
â”œâ”€â”€ Dashboard/
â”‚   â”œâ”€â”€ MainDashboard/
â”‚   â”œâ”€â”€ ApprovalCards/
â”‚   â””â”€â”€ QuickStats/
â”œâ”€â”€ UserManagement/
â”‚   â”œâ”€â”€ UsersList/
â”‚   â”œâ”€â”€ UserProfile/
â”‚   â”œâ”€â”€ AddUserModal/
â”‚   â””â”€â”€ EditUserModal/
â”œâ”€â”€ Audit/
â”‚   â”œâ”€â”€ ActionHistory/
â”‚   â”œâ”€â”€ AuditFilters/
â”‚   â””â”€â”€ ExportTools/
â”œâ”€â”€ Profile/
â”‚   â”œâ”€â”€ ProfileSettings/
â”‚   â”œâ”€â”€ PhotoUpload/
â”‚   â””â”€â”€ PersonalData/
â”œâ”€â”€ Notifications/
â”‚   â”œâ”€â”€ NotificationsList/
â”‚   â”œâ”€â”€ NotificationFilters/
â”‚   â””â”€â”€ NotificationActions/
â”œâ”€â”€ Navigation/
â”‚   â”œâ”€â”€ SideNavigation/
â”‚   â”œâ”€â”€ TopNavigation/
â”‚   â””â”€â”€ Breadcrumbs/
â”œâ”€â”€ Shared/
â”‚   â”œâ”€â”€ Pagination/
â”‚   â”œâ”€â”€ SearchFilters/
â”‚   â”œâ”€â”€ DataTable/
â”‚   â”œâ”€â”€ Modal/
â”‚   â””â”€â”€ ErrorBoundary/
â””â”€â”€ Forms/
    â”œâ”€â”€ InputField/
    â”œâ”€â”€ Dropdown/
    â”œâ”€â”€ DatePicker/
    â”œâ”€â”€ FileUpload/
    â””â”€â”€ FormValidation/
```

## ğŸš¨ **Critical Business Requirements**

### **Administrator Privileges Summary**
1. **User Lifecycle Management** - Complete control over user creation, approval, modification, and deactivation
2. **System Monitoring** - Full audit trail and action history tracking
3. **Security Oversight** - Access control, session management, and security policies
4. **Communication Hub** - Notification system and user communication
5. **Data Governance** - Data retention, privacy, and compliance management

### **Compliance Requirements**
- **GDPR Compliance** - Data protection and user rights
- **Audit Requirements** - Complete action logging and traceability
- **Security Standards** - Industry-standard security practices
- **Accessibility** - WCAG 2.1 compliance for all interfaces
- **Multi-language Support** - Hebrew and Russian language support

---

## ğŸ“‹ **Executive Summary**

The Administrator Permissions Module is the **most critical component** of the BankIM management portal, providing comprehensive administrative control over the entire system. With **125 total actions** across **13 main pages**, this module requires:

- **15 database tables** for complete data management
- **50+ API endpoints** for full functionality
- **Complex permission system** with granular access control
- **Advanced audit system** for compliance and security
- **Multi-device responsive design** (Desktop, Tablet, Mobile)
- **Multi-language support** (Hebrew, Russian)

**Implementation Priority**: ğŸ”¥ **CRITICAL** - This module must be completed first as it controls access to all other system components.

**Estimated Timeline**: 10 weeks for complete implementation
**Team Requirements**: Full-stack development team with security expertise
**Budget Impact**: High - Core system foundation

---
**Status**: âœ… **ANALYSIS COMPLETE**  
**Next Phase**: Begin implementation of Phase 1 (Core Foundation)  
**Ready for Development**: âœ… All specifications documented and verified 